#
# Copyright (c) Siemens AG, 2023
#
# Authors:
#  Tobias Schaffner <tobias.schaffner@siemens.com>
#
# SPDX-License-Identifier: MIT

header:
  version: 10
  includes:
    - kas/osadl-rt-test-image.yml

machine: starfive-visionfive2
target: osadl-rt-test-image-evl
distro: osadl-rt-test-xenomai

repos:
  xenomai-images:
    url: https://gitlab.com/Xenomai/xenomai-images.git
    commit: ce4e2df43838212698793d629ed71fe0d2652eb9

local_conf_header:
  kernel: |
    KERNEL_DEFCONFIG = ""
    KERNEL_NAME = "xenomai-4"
    PREFERRED_VERSION_linux-xenomai-4 = "9999-%"
    LATEST_GIT_BRANCH = "6.12"
  dtb: |
    DTB_VISIONFIVE2 = "jh7110-starfive-visionfive-2-v1.3b.dtb"
    DTB_FILES = "starfive/jh7110-starfive-visionfive-2-v1.3b.dtb"
    WICVARS += "DTB_VISIONFIVE2"
  xenomai-4: |
    XENOMAI_MAJOR_VERSION ?= "4"
  libevl-version: |
    PREFERRED_VERSION_libevl = "next"

